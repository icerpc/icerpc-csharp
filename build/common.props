<?xml version="1.0" encoding="utf-8"?>
<!-- TODO: the file is misnamed: it's common to tests and src, but not used by examples -->
<Project ToolsVersion="14.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="$(MSBuildThisFileDirectory)icerpc.version.props" />
    <PropertyGroup>
        <GenerateDocumentationFile>true</GenerateDocumentationFile>
        <Prefer32Bit>false</Prefer32Bit>
        <FileAlignment>512</FileAlignment>
        <ErrorReport>prompt</ErrorReport>
        <WarningLevel>4</WarningLevel>
        <DefineConstants>TRACE</DefineConstants>
        <Nullable>enable</Nullable>
        <TargetFramework>net8.0</TargetFramework>
        <LangVersion>11.0</LangVersion>
        <TreatWarningsAsErrors>false</TreatWarningsAsErrors>
        <AnalysisMode>All</AnalysisMode>
        <ImplicitUsings>true</ImplicitUsings>
        <NetRuntimeVersion>7.0.0</NetRuntimeVersion>
        <!-- TODO update to 1.2 stable release https://github.com/DotNetAnalyzers/StyleCopAnalyzers/pull/3187#issuecomment-1043221630 -->
        <StyleCopAnalyzersVersion>1.2.0-beta.435</StyleCopAnalyzersVersion>
        <IceRpcBuilderVersion>0.1.0-preview9</IceRpcBuilderVersion>
        <!-- Slicec compiler location -->
        <SliceCompilerExe Condition="'$(OS)' == 'Windows_NT'">slicec-cs.exe</SliceCompilerExe>
        <SliceCompilerExe Condition="'$(OS)' != 'Windows_NT'">slicec-cs</SliceCompilerExe>
        <IceRpcHome>$(MSBuildThisFileDirectory)..</IceRpcHome>
        <IceRpcToolsPath Condition="'$(IceRpcToolsPath)' == '' AND Exists('$(IceRpcHome)/tools/slicec-cs/target/release/$(SliceCompilerExe)')">$(IceRpcHome)/tools/slicec-cs/target/release</IceRpcToolsPath>
        <IceRpcToolsPath Condition="'$(IceRpcToolsPath)' == '' AND Exists('$(IceRpcHome)/tools/slicec-cs/target/debug/$(SliceCompilerExe)')">$(IceRpcHome)/tools/slicec-cs/target/debug</IceRpcToolsPath>
    </PropertyGroup>

    <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
        <DebugType>portable</DebugType>
        <Optimize>false</Optimize>
        <DebugSymbols>true</DebugSymbols>
        <RustConfiguration>debug</RustConfiguration>
    </PropertyGroup>

    <PropertyGroup Condition="'$(Configuration)' == 'Release'">
        <DebugType>portable</DebugType>
        <Optimize>true</Optimize>
        <RustConfiguration>release</RustConfiguration>
    </PropertyGroup>
</Project>
