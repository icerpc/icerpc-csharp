<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="14.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="$(MSBuildThisFileDirectory)icerpc.version.props" />
    <PropertyGroup>
        <GenerateDocumentationFile>true</GenerateDocumentationFile>
        <Prefer32Bit>false</Prefer32Bit>
        <FileAlignment>512</FileAlignment>
        <ErrorReport>prompt</ErrorReport>
        <WarningLevel>4</WarningLevel>
        <DefineConstants>TRACE</DefineConstants>
        <Nullable>enable</Nullable>
        <TargetFramework>net7.0</TargetFramework>
        <LangVersion>10.0</LangVersion>
        <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
        <AnalysisMode>All</AnalysisMode>
        <ImplicitUsings>true</ImplicitUsings>
        <NetRuntimeVersion Condition="'$(NetRuntimeVersion)' == ''">7.0.0-rc.1.22426.10</NetRuntimeVersion>
        <!-- Slicec compiler location -->
        <SliceCompilerExe Condition="'$(OS)' == 'Windows_NT'">slicec-cs.exe</SliceCompilerExe>
        <SliceCompilerExe Condition="'$(OS)' != 'Windows_NT'">slicec-cs</SliceCompilerExe>
        <IceRpcHome>$(MSBuildThisFileDirectory)..</IceRpcHome>
        <IceRpcToolsPath Condition="'$(IceRpcToolsPath)' == '' AND Exists('$(IceRpcHome)/tools/slicec-cs/target/release/$(SliceCompilerExe)')">$(IceRpcHome)/tools/slicec-cs/target/release</IceRpcToolsPath>
        <IceRpcToolsPath Condition="'$(IceRpcToolsPath)' == '' AND Exists('$(IceRpcHome)/tools/slicec-cs/target/debug/$(SliceCompilerExe)')">$(IceRpcHome)/tools/slicec-cs/target/debug</IceRpcToolsPath>
    </PropertyGroup>

    <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
        <DebugType>portable</DebugType>
        <Optimize>false</Optimize>
        <DebugSymbols>true</DebugSymbols>
        <RustConfiguration>debug</RustConfiguration>
    </PropertyGroup>

    <PropertyGroup Condition="'$(Configuration)' == 'Release'">
        <DebugType>portable</DebugType>
        <Optimize>true</Optimize>
        <RustConfiguration>release</RustConfiguration>
    </PropertyGroup>
</Project>
