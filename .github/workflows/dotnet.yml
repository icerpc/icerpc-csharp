name: Continuous Integration

on:
  push:
    branches: ["main"]
  pull_request:
    branches: ["main"]

jobs:
  build:
    uses: ./.github/workflows/build.yaml
    secrets:
      icerpc_deploy_key: ${{ secrets.ICERPC_DEPLOY_KEY }}
      nuget_api_token: ${{ secrets.NUGET_API_TOKEN }}
  build_examples:
    needs: build
    uses: ./.github/workflows/build_examples.yaml
  tests:
    needs: build
    uses: ./.github/workflows/tests.yaml
  test_templates:
    needs: build
    uses: ./.github/workflows/test_templates.yaml
