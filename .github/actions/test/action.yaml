name: Run Tests

runs:
  using: "composite"
  steps:
  - name: ðŸ§ª Test Slice Compiler
    run: cargo test --manifest-path tools/slicec-cs/Cargo.toml
    shell: bash
  - name: ðŸ§ª Test
    env:
      VSTEST_TESTHOST_SHUTDOWN_TIMEOUT: 1000
    run: dotnet test
    shell: bash

  # When using --blame-hang-timeout, the following snippet can be used to upload hang dumps
  # - name: Upload hang dumps
  #   uses: actions/upload-artifact@v4
  #   with:
  #     name: hang-dumps-${{ runner.os }}
  #     path: ${{ github.workspace }}/**/*.dmp
  #     if-no-files-found: ignore
  #   if: failure()
