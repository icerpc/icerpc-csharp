name: Run Tests

runs:
  using: "composite"
  steps:
  - name: ðŸ§ª Test Slice Compiler
    run: cargo test --manifest-path tools/slicec-cs/Cargo.toml
    shell: bash
  - name: ðŸ§ª Test
    run: |
      for  proj in tests/*/*.csproj; do
        echo "!!! Testing $proj !!!"
        dotnet test --no-build --verbosity normal --blame-hang-timeout 10s $proj
      done
    shell: bash

  - name: Upload test logs
    uses: actions/upload-artifact@v4
    with:
      name: hang-dumps
      path: ${{ inputs.working_directory }}/**/*.dmp
    if: failure()
